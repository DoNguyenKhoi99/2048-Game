{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/GameManagaer.js"],"names":["GAME_CONFIG","ROW","COL","MARGIN","ARR_BLOCK","cc","Class","extends","Component","properties","mainGame","Node","block","Prefab","score","Label","recored","loseLayout","winGame","loseGame","_isChange","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","initObj","node","string","initBlock","addNum","y","height","x","width","row","col","newBlock","instantiate","setParent","setPosition","v2","label","getChildByName","getComponent","setColor","slideLeftOrUp","array","newArray","push","length","slideRightOrDown","updateScore","newArr","randomXY","Math","random","number","floor","hasChangeArray","arr1","arr2","checkWin","active","total","clickRestart","checkLeft","arr","checkRight","checkUp","m","i","checkDown","event","keyCode","update"],"mappings":"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","file":"GameManagaer.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["\nconst GAME_CONFIG = {\n    ROW: 4,\n    COL: 4,\n    MARGIN: 16 //results from: (this.mainGame.width - this.block.width * GAME_CONFIG.ROW) / 5;\n};\n\nconst ARR_BLOCK = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        mainGame: cc.Node,\n        block: cc.Prefab,\n        score: cc.Label,\n        recored: cc.Label,\n        loseLayout: cc.Node, \n        winGame: cc.Node,\n        loseGame: cc.Node,\n        _isChange: false\n    },\n\n    onLoad() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        this.initObj();\n        this.score.node.string = 0;\n    },\n\n    initObj() {\n        this.initBlock();\n        this.addNum();\n        this.addNum();\n    },\n\n    initBlock() {\n        let y = this.mainGame.height / 2 - GAME_CONFIG.MARGIN,\n            x = this.mainGame.width / -2 + GAME_CONFIG.MARGIN;\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            for(let col = 0; col < GAME_CONFIG.COL; col++) {\n                this.newBlock = cc.instantiate(this.block); \n                this.newBlock.setParent(this.mainGame);\n                this.newBlock.setPosition(cc.v2(x, y));\n                x += this.newBlock.width + GAME_CONFIG.MARGIN;\n                if(ARR_BLOCK[row][col] != 0) {\n                    let label = this.newBlock.getChildByName(\"Value\")\n                    label.getComponent(cc.Label).string = ARR_BLOCK[row][col];\n                    this.newBlock.getComponent(\"BlockController\").setColor();\n                }\n            }\n            y -= this.newBlock.height + GAME_CONFIG.MARGIN;\n            x = this.mainGame.width / -2 + GAME_CONFIG.MARGIN;\n        };\n    },\n\n    slideLeftOrUp(array) {\n        let newArray = [];\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            if(array[row] != 0) newArray.push(array[row]);\n        };\n        for(let col = newArray.length; col < GAME_CONFIG.COL; col++){\n            newArray.push(0);\n        }\n        return newArray;\n    },\n\n    slideRightOrDown(array) {\n        let newArray = [];\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            if(array[row] == 0) newArray.push(array[row]);\n        };\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            if(array[row] != 0) newArray.push(array[row]);\n        };\n        return newArray;\n    },\n\n    addNum() {\n        this.updateScore();\n        let newArr = [];\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            for(let col = 0; col < GAME_CONFIG.COL; col++) { \n                if(ARR_BLOCK[row][col] == 0) {\n                    newArr.push({x: row, y: col});\n                }\n            }\n        }\n        if(newArr.length > 0) {\n            let randomXY = newArr[Math.random() * newArr.length >> 0];\n            let number = Math.floor(Math.random() * 4);\n            number < 3 ? ARR_BLOCK[randomXY.x][randomXY.y] = 2 : ARR_BLOCK[randomXY.x][randomXY.y] = 4;   \n        }\n        this.initBlock();\n    },\n\n    hasChangeArray(arr1, arr2) {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            if(arr1[row] != arr2[row]) {\n                this._isChange = true;\n            }\n        }\n    },\n\n    checkWin() {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            for(let col =0; col < GAME_CONFIG.COL; col++) {\n                if(ARR_BLOCK[row][col] === 2048) {\n                    this.winGame.active = true;\n                }\n            }\n        }\n    },\n\n    updateScore() {\n        let total = 0;\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            for(let col = 0; col < GAME_CONFIG.COL; col++) {\n                if(ARR_BLOCK[row][col] > 2) {\n                    total += ARR_BLOCK[row][col];\n                    this.score.string = total;\n                }\n            }\n        }\n    },\n\n    clickRestart() {\n\n    },\n\n    checkLeft() {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            let arr = ARR_BLOCK[row];\n            ARR_BLOCK[row] = this.slideLeftOrUp(ARR_BLOCK[row]);\n            for(let col = 0; col < GAME_CONFIG.COL - 1; col++) {\n                if(ARR_BLOCK[row][col] == ARR_BLOCK[row][col + 1]) {\n                    ARR_BLOCK[row][col] += ARR_BLOCK[row][col + 1];\n                    ARR_BLOCK[row][col + 1] = 0;\n                }\n            }\n            ARR_BLOCK[row] = this.slideLeftOrUp(ARR_BLOCK[row]);\n            this.hasChangeArray(arr, ARR_BLOCK[row]);\n        }\n        if(this._isChange) {\n            this.addNum();\n        }\n    },\n\n    checkRight() {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            let arr = ARR_BLOCK[row];\n            ARR_BLOCK[row] = this.slideRightOrDown(ARR_BLOCK[row]);\n            for(let col = 3; col > 0; col--) {\n                if(ARR_BLOCK[row][col] == ARR_BLOCK[row][col - 1]) {\n                    ARR_BLOCK[row][col] += ARR_BLOCK[row][col - 1];\n                    ARR_BLOCK[row][col - 1] = 0;\n                }\n            }\n            ARR_BLOCK[row] = this.slideRightOrDown(ARR_BLOCK[row]);\n            this.hasChangeArray(arr, ARR_BLOCK[row]);\n        }\n        if(this._isChange) {\n            this.addNum();\n        }\n    },\n\n    checkUp() {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            let newArr = [];\n            for(let col = 0; col < GAME_CONFIG.COL; col++) {\n                newArr.push(ARR_BLOCK[col][row]);    \n            }\n            let arr  = newArr;\n            newArr = this.slideLeftOrUp(newArr);\n            for(let m = 0; m < 3; m++) {\n                if(newArr[m] == newArr[m + 1]) {\n                    newArr[m] += newArr[m + 1];\n                    newArr[m + 1] = 0;\n                }\n            }\n            newArr = this.slideLeftOrUp(newArr);\n            for(let i = 0; i < 4; i++) {\n                ARR_BLOCK[i][row] = newArr[i];\n            }\n            this.hasChangeArray(arr, newArr);\n        }\n        if(this._isChange) {\n            this.addNum();\n        }\n    },\n\n    checkDown() {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            let newArr = [];\n            for(let col = 0; col < GAME_CONFIG.COL; col++) {\n                newArr.push(ARR_BLOCK[col][row]);\n            }\n            let arr  = newArr;\n            newArr = this.slideRightOrDown(newArr);\n            for(let m = 3; m > 0; m--) {\n                if(newArr[m] == newArr[m - 1]) {\n                    newArr[m] += newArr[m - 1];\n                    newArr[m - 1] = 0;\n                }\n            }\n            newArr = this.slideRightOrDown(newArr);\n            for(let i = 0; i < 4; i++) {\n                ARR_BLOCK[i][row] = newArr[i];\n            }\n            this.hasChangeArray(arr, newArr);\n        }\n        if(this._isChange) {\n            this.addNum();\n        }\n    },\n\n    onKeyDown(event) {\n        this._isChange = false;\n        switch(event.keyCode) {\n            case 37:\n                this.checkLeft();  \n                break;\n            case 39:\n                this.checkRight();\n                break;\n            case 38: \n                this.checkUp();\n                break;\n            case 40:\n                this.checkDown();\n        }\n    },\n\n    update() {\n        this.checkWin();\n    },\n});\n"]}