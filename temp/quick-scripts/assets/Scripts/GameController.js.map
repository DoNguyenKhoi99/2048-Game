{"version":3,"sources":["GameController.js"],"names":["Emitter","require","cc","Class","extends","Component","properties","tilePre","Prefab","_arrSlot","cloneNode","Node","_isStartGame","onLoad","instance","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","createSlot","randomTile","event","keyCode","macro","KEY","left","emit","right","up","down","i","j","tile","instantiate","parent","node","position","v2","x","y","push","pos1","Math","floor","random","length","pos2","tile1","tile2"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,eAAR,CAAhB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACAC,iBAAUL,GAAGM,MAHL;AAIRC,kBAAU,EAJF;AAKRC,mBAAYR,GAAGS,IALP;AAMRC,sBAAc;AANN,KAHP;;AAaLC,UAbK,oBAaI;AACLb,gBAAQc,QAAR,GAAmB,IAAId,OAAJ,EAAnB;AACAE,WAAGa,WAAH,CAAeC,EAAf,CAAkBd,GAAGe,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKC,SAA1D,EAAqE,IAArE;AACA,aAAKR,YAAL,GAAoB,IAApB;AACA,aAAKS,UAAL;AACA,aAAKC,UAAL;AACH,KAnBI;AAqBLF,aArBK,qBAqBKG,KArBL,EAqBY;AACb,gBAAQA,MAAMC,OAAd;AACI,iBAAKtB,GAAGuB,KAAH,CAASC,GAAT,CAAaC,IAAlB;AACI3B,wBAAQc,QAAR,CAAiBc,IAAjB,CAAsB,UAAtB;AACA;AACJ,iBAAK1B,GAAGuB,KAAH,CAASC,GAAT,CAAaG,KAAlB;AACI7B,wBAAQc,QAAR,CAAiBc,IAAjB,CAAsB,WAAtB;AACA;AACJ,iBAAK1B,GAAGuB,KAAH,CAASC,GAAT,CAAaI,EAAlB;AACI9B,wBAAQc,QAAR,CAAiBc,IAAjB,CAAsB,QAAtB;AACA;AACJ,iBAAK1B,GAAGuB,KAAH,CAASC,GAAT,CAAaK,IAAlB;AACI/B,wBAAQc,QAAR,CAAiBc,IAAjB,CAAsB,UAAtB;AACA;AAZR;AAcH,KApCI;AAsCLP,cAtCK,wBAsCO;AACR,aAAK,IAAIW,IAAI,CAAb,EAAgBA,KAAK,CAArB,EAAwBA,GAAxB,EAA4B;AACxB,iBAAK,IAAIC,IAAG,CAAZ,EAAeA,KAAK,CAApB,EAAuBA,GAAvB,EAA2B;AACvB,oBAAIC,OAAOhC,GAAGiC,WAAH,CAAe,KAAKzB,SAApB,CAAX;AACAwB,qBAAKE,MAAL,GAAc,KAAKC,IAAnB;AACAH,qBAAKI,QAAL,GAAgBpC,GAAGqC,EAAH,CAAM,KAAKF,IAAL,CAAUG,CAAV,GAAeR,IAAE,GAAvB,EAA4B,KAAKK,IAAL,CAAUI,CAAV,GAAeR,IAAE,GAA7C,CAAhB;AACA,qBAAKxB,QAAL,CAAciC,IAAd,CAAmBR,IAAnB;AACH;AACJ;AACJ,KA/CI;AAiDLZ,cAjDK,wBAiDO;AACR,YAAG,KAAKV,YAAR,EAAqB;AACjB,gBAAI+B,OAAOC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAe,KAAKrC,QAAL,CAAcsC,MAAxC,CAAX;AACA,gBAAIC,OAAOJ,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAe,KAAKrC,QAAL,CAAcsC,MAAxC,CAAX;;AAEA,gBAAIE,QAAQ/C,GAAGiC,WAAH,CAAe,KAAK5B,OAApB,CAAZ;AACA0C,kBAAMb,MAAN,GAAe,KAAKC,IAApB;AACAY,kBAAMX,QAAN,GAAiB,KAAK7B,QAAL,CAAckC,IAAd,EAAoBL,QAArC;;AAEA,gBAAIY,QAAQhD,GAAGiC,WAAH,CAAe,KAAK5B,OAApB,CAAZ;AACA2C,kBAAMd,MAAN,GAAe,KAAKC,IAApB;AACAa,kBAAMZ,QAAN,GAAiB,KAAK7B,QAAL,CAAcuC,IAAd,EAAoBV,QAArC;;AAEA,iBAAK1B,YAAL,GAAoB,KAApB;AACH,SAbD,MAcI;AACA;AACH;AACJ;AAnEI,CAAT","file":"GameController.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const Emitter = require(\"EventListener\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //blockWidth = 75;\n        //pad = 25\n        tilePre : cc.Prefab,\n        _arrSlot: [],\n        cloneNode : cc.Node,\n        _isStartGame: true,\n    },\n\n\n    onLoad() {\n        Emitter.instance = new Emitter();\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        this._isStartGame = true;\n        this.createSlot();\n        this.randomTile();\n    },\n\n    onKeyDown(event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.left:\n                Emitter.instance.emit(\"moveLeft\");\n                break;\n            case cc.macro.KEY.right:\n                Emitter.instance.emit(\"moveRight\");\n                break;\n            case cc.macro.KEY.up:\n                Emitter.instance.emit(\"moveUp\");\n                break;\n            case cc.macro.KEY.down:\n                Emitter.instance.emit(\"moveDown\");\n                break;\n        }\n    },\n\n    createSlot(){\n        for (let i = 0; i <= 3; i++){\n            for (let j =0; j <= 3; j++){\n                let tile = cc.instantiate(this.cloneNode);\n                tile.parent = this.node;\n                tile.position = cc.v2(this.node.x - (i*100),this.node.y - (j*100));\n                this._arrSlot.push(tile);\n            }\n        }\n    },  \n\n    randomTile(){\n        if(this._isStartGame){\n            let pos1 = Math.floor(Math.random()* this._arrSlot.length)\n            let pos2 = Math.floor(Math.random()* this._arrSlot.length)\n            \n            let tile1 = cc.instantiate(this.tilePre);\n            tile1.parent = this.node;\n            tile1.position = this._arrSlot[pos1].position\n\n            let tile2 = cc.instantiate(this.tilePre);\n            tile2.parent = this.node;\n            tile2.position = this._arrSlot[pos2].position\n\n            this._isStartGame = false;\n        }\n        else{\n            // ramdom 1 tile\n        } \n    }\n\n});\n"]}