{"version":3,"sources":["GameManagaer.js"],"names":["GAME_CONFIG","ROW","COL","MARGIN","cc","Class","extends","Component","properties","mainGame","Node","block","Prefab","cell","score","Label","recored","loseLayout","_arrBlockPos","onLoad","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","initObj","node","string","createCell","createBlock","y","height","x","width","row","col","_cell","instantiate","setParent","setPosition","v2","arrBlockPos","status","_block","event","keyCode","macro","KEY","left","right","checkRow","up","down","checkCol","error"],"mappings":"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","file":"GameManagaer.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["\nconst GAME_CONFIG = {\n    ROW: 4,\n    COL: 4,\n    MARGIN: 16 //results from: (this.mainGame.width - this.block.width * GAME_CONFIG.ROW) / 5;\n}\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        mainGame: cc.Node,\n        block: cc.Prefab,\n        cell: cc.Prefab,\n        score: cc.Label,\n        recored: cc.Label,\n        loseLayout: cc.Node, \n        _arrBlockPos: [],\n    },\n\n    onLoad() {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        this.initObj();\n        this.score.node.string = 0;\n    },\n\n    initObj() {\n        this.createCell();\n        this.createBlock();\n    },\n\n    createCell() {\n        let y = this.mainGame.height / 2 - GAME_CONFIG.MARGIN;\n        let x = this.mainGame.width / -2 + GAME_CONFIG.MARGIN;\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            this._arrBlockPos[row] = [];\n            for(let col = 0; col < GAME_CONFIG.COL; col++) {\n                this._arrBlockPos[row][col] = {x, y}; //SEVE POSITION VALUE\n                this._cell = cc.instantiate(this.cell); //CREATE PREAFAB CELL\n                this._cell.setParent(this.mainGame);\n                this._cell.setPosition(cc.v2(x, y));\n                x += this._cell.width + GAME_CONFIG.MARGIN;\n            }\n            y -= this._cell.height + GAME_CONFIG.MARGIN;\n            x = this.mainGame.width / -2 + GAME_CONFIG.MARGIN;\n        };\n    },\n\n    createBlock() {\n        for(let row = 0; row < GAME_CONFIG.ROW; row++) {\n            for(let col = 0; col < GAME_CONFIG.COL; col++) {\n                let arrBlockPos = this._arrBlockPos[row][col];\n                if(!arrBlockPos.status) {\n                    this._block = cc.instantiate(this.block);\n                    this._block.setParent(this.mainGame);\n                    this._block.setPosition(arrBlockPos.x, arrBlockPos.y);\n                };   \n            }\n        };\n    },\n\n    onKeyDown(event) {\n        switch(event.keyCode) {\n            case cc.macro.KEY.left:\n            case cc.macro.KEY.right:\n                this.checkRow();\n                break;\n            case cc.macro.KEY.up:\n            case cc.macro.KEY.down:\n                this.checkCol();               \n                break;\n        };\n    },\n\n    checkRow() {\n        cc.error(\"cc\");\n    },\n\n    checkCol() {\n        cc.error(\"cc\");\n    },\n});\n"]}